<assembly>
	<includeBaseDirectory>false</includeBaseDirectory>
	<formats>
		<format>dir</format>

	</formats>

	<fileSets>
		<fileSet>
			<directory>src/main/resources</directory>
			<outputDirectory></outputDirectory>
		</fileSet>
      <fileSet>
         <directory>src/main/resources/gatein.ear</directory>
         <outputDirectory>gatein.ear-josso182</outputDirectory>
      </fileSet>
      <fileSet>
         <directory>src/main/resources/gatein.ear</directory>
         <outputDirectory>gatein.ear-josso182</outputDirectory>
      </fileSet>

      <!-- We need to use old josso libraries for josso 1.8.1 packaging. Libraries  are included in dependencies of project gatein-agent-josso181
           and downloaded thanks to maven-dependency-plugin declared in pom.xml of gatein-agent-josso181 module. -->
      <fileSet>
         <directory>../gatein-agent-josso181/target/dependency</directory>
         <outputDirectory>gatein.ear/lib</outputDirectory>
         <includes>
            <include>josso-agents-bin-1.8.0.jar</include>
            <include>josso-agent-shared-1.8.1.jar</include>
         </includes>
      </fileSet>
	</fileSets>

	<dependencySets>

		<dependencySet>
			<outputDirectory>gatein.ear/lib</outputDirectory>
			<useProjectArtifact>false</useProjectArtifact>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
				<include>org.springframework:spring-beans</include>
				<include>org.springframework:spring-context</include>
				<include>org.springframework:spring-core</include>
				<include>commons-discovery:commons-discovery</include>
				<include>org.apache.axis:axis</include>
				<include>org.apache.xbean:xbean-spring</include>
				<include>org.gatein.sso:sso-agent</include>
				<include>org.gatein.sso:sso-auth-callback</include>
			</includes>
		</dependencySet>

      <dependencySet>
         <outputDirectory>gatein.ear-josso182/lib</outputDirectory>
         <useProjectArtifact>false</useProjectArtifact>
         <useTransitiveDependencies>false</useTransitiveDependencies>
         <includes>
            <include>org.josso:josso-agents-bin</include>
            <include>org.josso:josso-agent-shared</include>
            <include>org.springframework:spring-beans</include>
            <include>org.springframework:spring-context</include>
            <include>org.springframework:spring-core</include>
            <include>commons-discovery:commons-discovery</include>
            <include>org.apache.axis:axis</include>
            <include>org.apache.xbean:xbean-spring</include>
            <include>org.gatein.sso:sso-agent</include>
            <include>org.gatein.sso:sso-auth-callback</include>
         </includes>
      </dependencySet>

		<dependencySet>
			<outputDirectory>plugin/webapps/josso/WEB-INF/lib</outputDirectory>
			<useProjectArtifact>false</useProjectArtifact>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
				<include>commons-httpclient:commons-httpclient</include>
				<include>commons-logging:commons-logging</include>
				<include>org.gatein.sso:sso-josso-plugin</include>
				<include>apache-log4j:log4j</include>
			</includes>
		</dependencySet>

	</dependencySets>

</assembly>